buildscript {
    apply from: 'repos_buildscript.gradle', to: buildscript

    dependencies {
        classpath 'gradle.plugin.com.pivotstir:gogradle:1.0.15'
        classpath "com.netflix.nebula:gradle-ospackage-plugin:4.4.0"
    }
}

apply from: "repos.gradle", to: repositories

apply plugin: "com.pivotstir.gogradle"
apply plugin: "nebula.ospackage"

go {
    env {
        version = '1.11'
        useSandbox = false
    }

    test {
        envs = ["CGO_ENABLED": 0]
        ignoredDirs = []
    }

    grpc {
        referencePackages = []
    }

    build {
        envs = ["CGO_ENABLED": 0]
    }

    dependencies {
        build 'golang.org/x/text'
        build 'golang.org/x/net'
        build 'github.com/thoas/go-funk'
        build 'github.com/gin-gonic/gin@v1.3'
        build 'github.com/swaggo/gin-swagger@v1.0'
        build 'github.com/aviddiviner/gin-limit'

        test 'github.com/stretchr/testify@v1.2'
        test 'github.com/Pallinder/go-randomdata'
        test 'github.com/jarcoal/httpmock'
        test 'github.com/golang/mock'
    }
}
